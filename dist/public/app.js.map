{"version":3,"sources":["../../src/public/app.js"],"names":["socket","io","connect","canvas","document","getElementById","context","getContext","img","Image","fillStyle","fillText","width","height","on","data","console","log","frame","uint8Arr","Uint8Array","buffer","str","String","fromCharCode","apply","base64String","btoa","onload","drawImage","src"],"mappings":";;AAAA;AACA,IAAIA,SAASC,GAAGC,OAAH,CAAW,uBAAX,CAAb;;AAEA,IAAIC,SAASC,SAASC,cAAT,CAAwB,cAAxB,CAAb;AACA,IAAIC,UAAUH,OAAOI,UAAP,CAAkB,IAAlB,CAAd;AACA,IAAIC,MAAM,IAAIC,KAAJ,EAAV;;AAEA;AACAH,QAAQI,SAAR,GAAoB,MAApB;AACAJ,QAAQK,QAAR,CAAiB,YAAjB,EAA+BR,OAAOS,KAAP,GAAa,CAAb,GAAe,EAA9C,EAAkDT,OAAOU,MAAP,GAAc,CAAhE;;AAGEb,OAAOc,EAAP,CAAU,OAAV,EAAmB,UAAUC,IAAV,EAAgB;AACjCC,UAAQC,GAAR,CAAY,WAASC,KAArB;AACA;AACA,MAAIC,WAAW,IAAIC,UAAJ,CAAeL,KAAKM,MAApB,CAAf;AACA,MAAIC,MAAMC,OAAOC,YAAP,CAAoBC,KAApB,CAA0B,IAA1B,EAAgCN,QAAhC,CAAV;AACA,MAAIO,eAAeC,KAAKL,GAAL,CAAnB;;AAEAd,MAAIoB,MAAJ,GAAa,YAAY;AACvBtB,YAAQuB,SAAR,CAAkB,IAAlB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B1B,OAAOS,KAArC,EAA4CT,OAAOU,MAAnD;AACD,GAFD;AAGAL,MAAIsB,GAAJ,GAAU,2BAA2BJ,YAArC;AACD,CAXD","file":"app.js","sourcesContent":["// MODIFY THIS TO THE APPROPRIATE URL IF IT IS NOT BEING RUN LOCALLY\nvar socket = io.connect('http://localhost:3000');\n\nvar canvas = document.getElementById('canvas-video');\nvar context = canvas.getContext('2d');\nvar img = new Image();\n\n// show loading notice\ncontext.fillStyle = '#333';\ncontext.fillText('Loading...', canvas.width/2-30, canvas.height/3);\n\n\n  socket.on('frame', function (data) {\n    console.log('frame '+frame);\n    // Reference: http://stackoverflow.com/questions/24107378/socket-io-began-to-support-binary-stream-from-1-0-is-there-a-complete-example-e/24124966#24124966\n    var uint8Arr = new Uint8Array(data.buffer);\n    var str = String.fromCharCode.apply(null, uint8Arr);\n    var base64String = btoa(str);\n\n    img.onload = function () {\n      context.drawImage(this, 0, 0, canvas.width, canvas.height);\n    };\n    img.src = 'data:image/png;base64,' + base64String;\n  });\n"]}