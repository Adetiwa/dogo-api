{"version":3,"sources":["../../src/services/notification.js"],"names":["FCM","require","serverKey","notification","to","title","body","type","config","secret","user_token","driver_token","fcm","message","send","then","response","console","log","catch","err","error"],"mappings":"AAAA;;;;;;AAEA;;;;;;AADA,IAAIA,MAAMC,QAAQ,UAAR,CAAV;;AAEA,IAAIC,YAAY,EAAhB;;AAEA,IAAMC,eAAe,SAAfA,YAAe,CAASC,EAAT,EAAaC,KAAb,EAAoBC,IAApB,EAA0BC,IAA1B,EAAgC;AACjD,QAAIA,QAAQ,MAAZ,EAAoB;AAChBL,oBAAYM,iBAAOC,MAAP,CAAcC,UAA1B;AACH,KAFD,MAEO;AACHR,oBAAYM,iBAAOC,MAAP,CAAcE,YAA1B;AACH;AACD,QAAIC,MAAM,IAAIZ,GAAJ,CAAQE,SAAR,CAAV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIW,UAAU;AACN,cAAKT,EADC;AAEN,6BAAqB,IAFf;AAGN,wBAAgB;AACZ,qBAASC,KADG;AAEZ,oBAAQC;AACR;AAHY,SAHV;AAQN,gBAAQ;AACJ,qBAAQ;AADJ;AAIhB;AAZc,KAAd,CAaAM,IAAIE,IAAJ,CAASD,OAAT,EACCE,IADD,CACM,UAASC,QAAT,EAAkB;AACpBC,gBAAQC,GAAR,CAAY,mCAAZ,EAAiDF,QAAjD;AACH,KAHD,EAICG,KAJD,CAIO,UAASC,GAAT,EAAa;AAChBH,gBAAQC,GAAR,CAAY,2BAAZ;AACAD,gBAAQI,KAAR,CAAcD,GAAd;AACH,KAPD;AAQH,CAzCD;;kBA6CejB,Y;;AAGf;AACA;AACA","file":"notification.js","sourcesContent":["'use strict'\nvar FCM = require('fcm-push');\nimport config from \"../config\";\nvar serverKey = '';\n    \nconst notification = function(to, title, body, type) {\n    if (type == \"user\") {\n        serverKey = config.secret.user_token;\n    } else {\n        serverKey = config.secret.driver_token;\n    }\n    var fcm = new FCM(serverKey);\n\n    // let message = {\n    //     to: to, // required fill with device token or topics\n    //     registration_ids: to,\n    //     priority: 'high',\n    //     collapse_key: 'your_collapse_key', \n    //     data: data,\n    //     notification: {\n    //         'body': 'uje',\n    //         'title': 'titleenefwef'\n    //     }\n    // }\n\n    let message = {\n            \"to\":to,\n            \"content_available\": true,\n            \"notification\": {\n                \"title\": title,\n                \"body\": body\n                // \"click_action\": \"fcm.ACTION.HELLO\"\n            },\n            \"data\": {\n                \"extra\":\"juice\"\n            }\n    }\n    //promise style\n    fcm.send(message)\n    .then(function(response){\n        console.log(\"Successfully sent with response: \", response);\n    })\n    .catch(function(err){\n        console.log(\"Something has gone wrong!\");\n        console.error(err);\n    })\n}\n\n\n\nexport default notification\n\n\n// exports.notification = function(to, data, notification, type) {\n//     console.log(\"Hola\");\n//   };\n  \n\n"]}